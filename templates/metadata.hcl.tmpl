# SPDX-FileCopyrightText: Copyright Â© contributors to CloudNativePG, established as CloudNativePG a Series of LF Projects, LLC.
# SPDX-License-Identifier: Apache-2.0
#

# TODO: REMOVE ALL COMMENTS BELOW BEFORE FINALIZING
# ############################################################
# IMPORTANT: this file is a template. All comments (lines starting # with "#"
# or block comments) MUST be removed from the final `metadata.hcl` file before
# publishing or using it in production. The comments are only explanatory notes
# for authors of the contribution and must not remain in the final
# `metadata.hcl`.
# ############################################################
#
# Field notes (keep here only while editing the template):
#
# - `image_name`: MUST be unique across the container registry because
#   it identifies the image (e.g. ghcr.io/cloudnative-pg/<image_name>).
#
# - `shared_preload_libraries`: list libraries to be added to
#   `shared_preload_libraries` in Postgres. Normally empty.
#   Example: ["pgaudit"].
#
# - `extension_control_path`: if EMPTY (`[]`), the operator follows the CNPG
#   convention and will add the image's `share` directory to
#   `extension_control_path`.
#   See: https://cloudnative-pg.io/docs/current/imagevolume_extensions#image-specifications
#
# - `dynamic_library_path`: if EMPTY (`[]`) the operator will add the image's
#   `lib` directory to `dynamic_library_path`.
#
# - `ld_library_path`: this SHOULD be defined when your extension needs
#   additional (usually system) libraries loaded into Postgres before startup. If
#   left EMPTY (`[]`) the operator will NOT alter `ld_library_path`. See the
#   `postgis` extension metadata for an example usage.
#
# - `auto_update_os_libs`: set to true to allow the maintenance tooling
#   to update OS libraries automatically; look at the `postgis` example.
#
# - `required_extensions`: must contain the name(s) of the sibling
#   folders in this repository that contain a required extension.
#
# ############################################################
metadata = {
  name                     = "{{ .Name }}"
  sql_name                 = "{{ .Name }}"
  image_name               = "{{ .Name }}"
  shared_preload_libraries = []
  extension_control_path   = []
  dynamic_library_path     = []
  ld_library_path          = []
  auto_update_os_libs      = false
  required_extensions      = []

  versions = {
    {{- range $distro := .Distros}}
    {{ $distro }} = {
        {{- range $version := $.Versions}}
        // renovate: suite={{ $distro }}-pgdg depName={{ replaceAll $.Package "%version%" $version }}
        "{{ $version }}" = "<package-version-here>"
        {{- end}}
    }
    {{- end}}
  }
}
